struct File

extern fn write(len: usize, file: File^, buffer: u8[^])

fn main(stream: File^):
    stream.print_str("Hello, world!")

fn print_str(file: File^, anon str: u8[^]):
    write(:file, len: str.strlen(), buffer: str)

fn strlen(anon str: u8[^]) usize:
    let mut len = 0
    while str[len] != 0_u8: 0
    len
